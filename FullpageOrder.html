<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product Details</title>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-50 min-h-screen">
    <!-- üîπ Header -->

  <div class="flex w-full md:hidden items-center justify-between p-2">
    <button onclick="history.back()" aria-label="Go back"
      class="w-10 h-10 bg-black text-white rounded-full flex justify-center items-center shadow-sm">
      <i class="fas fa-chevron-down text-white font-extrabold text-lg">
      </i>
    </button>
    <button onclick="window.location.href='index.html'" aria-label="Go back" class="flex justify-center items-center">
      <h1 class="mx-auto text-4xl sm:text-5xl font-black leading-none
             text-black">
        Gift Zone
      </h1>
    </button>

  </div>
    <!-- üîπ Product Section -->
    <main id="course-detail" class=" mx-auto "></main>




    <nav aria-label="Bottom navigation " id="orderbtn"
        class="fixed md:hidden bottom-0 z-[99999999999px] md:w-full md:flex justify-between bg-gray-100 left-0 right-0 border-t gap-1 border-[#d9d9d9]  flex  items-center py-1 md:py-0 px-2 z-50">

        <button onclick="window.location.href='https://wa.me/918251092973'" onclick="notload()"
            class="md:hidden text-white bg-black font-semibold rounded-full md:py-1 py-1.5 w-14 mx-auto text-center"
            type="button">
            <i class="fab fa-whatsapp text-2xl p-1"></i>
        </button>

        <button id="openLoginBtn" onclick="openLogin()"
            class=" text-white bg-black text-2xl md:mt-4 font-semibold rounded-full md:py-1 py-1.5 w-full md:w-full  mx-auto text-center"
            type="button">
            Book
        </button>
    </nav>

    <!-- üîπ Script -->
    <script>
        const SHEET_API =
            "https://script.google.com/macros/s/AKfycbzMq8ZIKjp_zbvuGStwYd7m4eizacjlrwPyu3vxuCxLCLC_iPAIiU-2imLLM0yVJxNb/exec";

        function getCourseIdFromURL() {
            return new URLSearchParams(location.search).get("id");
        }

        // ‚≠ê Helper: Render stars for rating
        function renderStars(rating) {
            const stars = Math.min(5, Math.max(0, parseInt(rating || 0)));
            return "‚òÖ".repeat(stars) + "‚òÜ".repeat(5 - stars);
        }

        function renderCourse(course) {
            // Prevent undefined reference errors for missing data
            const Order = `<button class='bg-black hover:bg-gray-800 w-full text-white px-2 py-2 rounded-lg font-semibold mt-4'>Order Now</button>`;
            const f = { icon: "fas fa-tag", text: "Quality Product" };
            document.getElementById("course-detail").innerHTML = `
                <section class="md:flex w-full md:[100vw] bg-gray-100 overflow-x-hidden">
                    <div class="dragimg items-top flex flex-col w-[100vw] md:w-[55vw]" id="dragimg">
                        <div style="background-image: url('https://images.unsplash.com/photo-1513694203232-719a280e022f?fm=jpg&q=60&w=3000&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8bGl2aW5nJTIwcm9vbSUyMHdhbGx8ZW58MHx8MHx8fDA%3Dg'); 
                       background-size: cover; 
                       background-position: center; 
                       width: 100%; 
                      ;" id="Wall" onclick="notload()" class="items-center justify-center h-[400px]  w-[100vw] md:w-[100%] md:h-full overflow-hidden">
                            <img src="${course.Icon || course.Image || ''}" alt="${course.Tittle || ''}" class="w-40 h-100 mt-2 object-cover justify-center mx-auto">
                        </div>
                    </div>

                    <div class="flex1 bg-gray-100 px-2 w-full md:w-[45vw] py-2 z-[400px]">
                        <div>
                            <h1 class="text-2xl text-black md:text-3xl font-extrabold">${course.Tittle || ''}</h1>
                            <p class="text-sm text-gray-500">${course.Category || ''} &middot; ‚Çπ${course.Price || ''}</p>
                        </div>
                        <p class="text-gray-700 text-justify mt-2">${course.SubTittle || ''}</p>
                        <br>

                            <div class="w-full mx-auto">
                                <div class="flex">
                                    <p class="text-black font-semibold mb-2 text-base">Select Size</p>
                                </div>

                                <div class="flex flex-wrap gap-x-2 gap-y-2 md:justify-start justify-start">
                                    ${[
                                        { size: "4 x 6", price: "‚Çπ 100" },
                                        { size: "5 x 7", price: "‚Çπ 140" },
                                        { size: "6 x 8", price: "‚Çπ 150" },
                                        { size: "8 x 12", price: "‚Çπ 299" },
                                        { size: "10 x 15", price: "‚Çπ 419" },
                                        { size: "12 x 18", price: "‚Çπ 549" },
                                        { size: "16 x 24", price: "‚Çπ 1,350" },
                                        { size: "20 x 30", price: "‚Çπ 1,619" },
                                        { size: "24 x 36", price: "‚Çπ 1,999" },
                                    ]
                                        .map(
                                            item => `
          <div onclick="openLogin()" class="flex flex-col justify-between items-center">
            <button class="border border-gray-400 rounded-md px-3 py-1.5 text-black font-semibold text-sm" type="button">${item.size}</button>
            <span class="text-sm font-extrabold text-gray-700 mt-1">${item.price}</span>
          </div>
        `
                                        )
                                        .join("")}
                                </div>
                            </div>

                            <div class=" hidden md:mt-4 bg-gray-100 md:block flex">
                                ${Order}
                            </div>

                            <hr class="border-2 mt-2 md:mt-4">
                            </section>

                            <div class="instructors md:flex justify-between mx-auto bg-gray-100 p-2 mb-20">

                                <div class="flex-1 w-full h-full md:p-4 p-2">
                                    <h2 class="text-lg w-96 font-semibold mt-4 mb-2">Specification</h2>
                                    <ul class="list-disc list-inside space-y-1 text-gray-700 text-justify break-words overflow-hidden">
                                        ${course.Specification || 'No details available.'}
                                    </ul>

                                    <hr class="border-2 mt-2">
                                </div>

                                <div class=" p-2 w-full flex1">
                                    <h2 class="text-lg font-semibold py-2 mb-2">Order Process</h2>
                                    <ul class="space-y-3 px-4 mb-2">
                                        <div class="flex items-center space-x-4">
                                            <div class="flex flex-col items-center space-y-1">
                                                <div class="w-10 h-10 rounded-full bg-gray-500 flex justify-center items-center">
                                                    <i class="fas fa-clipboard-list text-white text-lg"></i>
                                                </div>
                                                <span class="text-gray-600 text-xs font-bold font-sans">Ordered</span>
                                            </div>

                                            <div class="w-8 h-0.5 bg-red-600 rounded"></div>

                                            <div class="flex flex-col items-center space-y-1">
                                                <div class="w-10 h-10 rounded-full bg-gray-500 flex justify-center items-center">
                                                    <i class="fas fa-box-open text-white text-lg"></i>
                                                </div>
                                                <span class="text-gray-600 text-xs font-bold font-sans">Packed</span>
                                            </div>

                                            <div class="w-8 h-0.5 bg-red-600 rounded"></div>

                                            <div class="flex flex-col items-center space-y-1">
                                                <div class="w-10 h-10 rounded-full bg-gray-500 flex justify-center items-center">
                                                    <i class="fas fa-truck-moving text-white text-lg"></i>
                                                </div>
                                                <span class="text-gray-600 text-xs font-bold font-sans">Transit</span>
                                            </div>

                                            <div class="flex space-x-1">
                                                <span class="w-1.5 h-1.5 rounded-full bg-gray-400"></span>
                                                <span class="w-1.5 h-1.5 rounded-full bg-gray-400"></span>
                                                <span class="w-1.5 h-1.5 rounded-full bg-gray-400"></span>
                                                <span class="w-1.5 h-1.5 rounded-full bg-gray-400"></span>
                                            </div>

                                            <div class="flex flex-col items-center space-y-1">
                                                <div class="w-10 h-10 rounded-full bg-gray-500 flex justify-center items-center">
                                                    <i class="fas fa-home text-white text-lg"></i>
                                                </div>
                                                <span class="text-gray-600 text-xs font-bold font-sans">Delivered</span>
                                            </div>
                                        </div>
                                    </ul>

                                    <h2 class="text-lg font-semibold mb-2">Reviews</h2>
                                    <ul class="space-y-3">
                                        <li class="border w-full rounded p-3 bg-gray-50">
                                            <div class="flex justify-between items-center mb-1">
                                                <span class="font-semibold text-gray-800">${course.Name || 'User'}</span>
                                                <span class="flex gap-0.5">${renderStars(course.Ratting || 4)}</span>
                                            </div>
                                            <p class="text-sm text-gray-600">${course.Reviews || 'No reviews yet.'}</p>
                                        </li>
                                    </ul>
                                </div>

                            </div>`;
        }

        // üîπ Load product by Id
        window.addEventListener("DOMContentLoaded", () => {
            const courseId = getCourseIdFromURL();

                            if (!courseId) {
                                document.getElementById("course-detail").innerHTML =
                                `<p class="text-center text-red-500 font-medium mt-10">No product selected.</p>`;
                            return;
            }

                            fetch(`${SHEET_API}?action=read`)
                .then((res) => res.json())
                .then((data) => {
                    const course = data.records.find((c) => String(c.Id) === String(courseId));
                            if (course) renderCourse(course);
                            else
                            document.getElementById("course-detail").innerHTML =
                            `<p class="text-center text-gray-500 mt-10">Product not found.</p>`;
                })
                .catch(() => {
                                document.getElementById("course-detail").innerHTML =
                                `<p class="text-center text-red-500 mt-10">Failed to load product details. Try again later.</p>`;
                });
        });
    </script>
</body>

</html>